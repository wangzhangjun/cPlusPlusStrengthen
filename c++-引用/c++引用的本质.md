# c++引用的本质

## 1.思考c++在引用的背后是如何实现的

* 1.引用在C++中的内部实现是一个常指针

  ```
  Type& name <===> Type* const name   //name不可变，这个地址不可变

  ```

  ```
  #include <iostream>
  struct Teacher {
    int &a;
    int &b;
  };
  int main() {
    printf("sizeof(Teacher) %d\n", sizeof(Teacher)); //16
    return 0;
  }
  ```

* 2.C++编译器在编译过程中使用常指针作为引用的内部实现，因此引用所占用的空间大小与指针相同。
* 3.从使用的角度，引用会让人误会其只是一个别名，没有自己的存储空间。这是C++为了实用性而做出的细节隐藏。

```
void func(int &a)
{
    a = 5;
}
void func(int *const a)
{
    *a = 5;
}
```

## 2.间接赋值的三个条件

```
1.定义两个变量 (一个实参一个形参)
2.建立关联 实参取地址传给形参
3.*p形参去间接的修改实参的值
```
引用在实现上，只不过是把:间接赋值成立的三个条件的后两步和二为一. 当实参传给形参引用的时候，只不过是c++编译器帮我们程序员手工取了 一个实参地址，传给了形参引用\(常量指针\)。
